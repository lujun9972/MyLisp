(defvar eshell/grep_remote_hosts '("10.8.205.49" "10.8.6.9"))
(defun eshell/command-remote (host user password cmd)
  (concat " " user "@" host " -pw " password " \". ~/.profile;" cmd "\"")
)


(defun eshell/grep_remote(log_path matchRegxp)
  (let (cmd)
	(setq cmd (concat "cd " log_path ";" "grep " matchRegxp " *"))
	(dolist (remote-host eshell/grep_remote_hosts)
	  (eshell/shell-command-remote remote-host "cnaps2" "123456" cmd))))
;; (eshell/grep_remote "~/log/2014/06/03" "123")
